# General settings
set(CPACK_PACKAGE_NAME "@PROJECT_NAME@")
set(CPACK_PACKAGE_CONTACT "@PROJECT_CONTACT@")
set(CPACK_PACKAGE_DESCRIPTION_FILE "@PROJECT_README@")
set(CPACK_PACKAGE_DESCRIPTION_SUMMARY "@PROJECT_DESCRIPTION@")
set(CPACK_PACKAGE_DIRECTORY "@CMAKE_CURRENT_SOURCE_DIR@/dist")
set(CPACK_PACKAGE_INSTALL_DIRECTORY "@PROJECT_NAME@")
set(CPACK_PACKAGE_VENDOR "@PROJECT_VENDOR@")
set(CPACK_PACKAGE_VERSION "@PROJECT_VERSION@")
set(CPACK_RESOURCE_FILE_LICENSE "@PROJECT_LICENSE@")
set(CPACK_RESOURCE_FILE_README "@PROJECT_README@")
set(CPACK_INSTALL_CMAKE_PROJECTS "@CMAKE_BINARY_DIR@;@PROJECT_NAME@;ALL;/")
set(CPACK_CMAKE_GENERATOR "@CMAKE_GENERATOR@")
set(CPACK_PACKAGE_INSTALL_DIRECTORY "@PROJECT_NAME@")
set(CPACK_PACKAGE_RELOCATABLE TRUE)

if(WIN32)
    set(CPACK_GENERATOR "NSIS")
elseif(APPLE)
    set(CPACK_GENERATOR "productbuild")
elseif(UNIX)
    set(CPACK_GENERATOR "TBZ2;DEB")
    if(EXISTS "/usr/bin/rpmbuild")
        list(APPEND CPACK_GENERATOR "RPM")
    endif()
endif()

if(WIN32)
    set(CPACK_SOURCE_GENERATOR "ZIP")
else()
    set(CPACK_SOURCE_GENERATOR "TBZ2")
endif()

set(CPACK_SOURCE_IGNORE_FILES
    "/\\.git/"
    "/\\.gitignore"
    "\\.DS_Store"
    "/build/"
    "/dist/"
)

set(CPACK_PACKAGE_FILE_NAME "@PROJECT_NAME@-@PROJECT_VERSION@")
set(CPACK_SOURCE_PACKAGE_FILE_NAME "@PROJECT_NAME@-src-@PROJECT_VERSION@")

# DPKG settings
set(CPACK_DEBIAN_COMPRESSION_TYPE "xz")
if("@CMAKE_SYSTEM_PROCESSOR@" STREQUAL "x86_64")
	set(CPACK_DEBIAN_PACKAGE_ARCHITECTURE "amd64")
else()
	set(CPACK_DEBIAN_PACKAGE_ARCHITECTURE "@CMAKE_SYSTEM_PROCESSOR@")
endif()
set(CPACK_DEBIAN_PACKAGE_DEPENDS "libc6 (>= 2.4), libstdc++6 (>= 5), libqt5core5a, libqt5bluetooth5, libqt5dbus5, libqt5network5")
set(CPACK_DEBIAN_PACKAGE_DESCRIPTION "@PROJECT_DESCRIPTION@")
set(CPACK_DEBIAN_PACKAGE_HOMEPAGE "@PROJECT_HOMEPAGE@")
set(CPACK_DEBIAN_PACKAGE_MAINTAINER "@PROJECT_CONTACT@")
set(CPACK_DEBIAN_PACKAGE_NAME "@PROJECT_NAME@")
set(CPACK_DEBIAN_PACKAGE_PRIORITY "optional")
set(CPACK_DEBIAN_PACKAGE_SECTION "devel")
set(CPACK_DEBIAN_PACKAGE_VERSION "@PROJECT_VERSION@")
set(CPACK_DEBIAN_PACKAGE_SHLIBDEPS OFF)
set(CPACK_DEBIAN_PACKAGE_DEBUG OFF)
set(CPACK_DEBIAN_PACKAGE_RECOMMENDS "")
set(CPACK_DEBIAN_PACKAGE_SUGGESTS "")

# RPM settings
set(CPACK_RPM_COMPRESSION_TYPE "bzip2")
set(CPACK_RPM_PACKAGE_ARCHITECTURE "@CMAKE_SYSTEM_PROCESSOR@")
# set(CPACK_RPM_PACKAGE_AUTOREQPROV "OFF")
# set(CPACK_RPM_PACKAGE_DESCRIPTION "@PROJECT_DESCRIPTION@")
set(CPACK_RPM_PACKAGE_LICENSE "@PROJECT_LICENSE_NAME@")
set(CPACK_RPM_PACKAGE_NAME "@PROJECT_NAME@")
# set(CPACK_RPM_PACKAGE_RELEASE "1")
set(CPACK_RPM_PACKAGE_REQUIRES "qt5-qtbase, qt5-qtconnectivity")
set(CPACK_RPM_PACKAGE_SUGGESTS "")
set(CPACK_RPM_PACKAGE_SUMMARY "@PROJECT_DESCRIPTION@")
set(CPACK_RPM_PACKAGE_URL "@PROJECT_HOMEPAGE@")
set(CPACK_RPM_PACKAGE_VENDOR "@PROJECT_VENDOR@")
set(CPACK_RPM_PACKAGE_VERSION "@PROJECT_VERSION@")
